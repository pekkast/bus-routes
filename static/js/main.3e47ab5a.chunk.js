(this["webpackJsonpbus-routes-simple"]=this["webpackJsonpbus-routes-simple"]||[]).push([[0],{30:function(e){e.exports=JSON.parse('{"pysakit":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R"],"tiet":[{"mista":"A","mihin":"B","kesto":3},{"mista":"B","mihin":"D","kesto":2},{"mista":"D","mihin":"A","kesto":1},{"mista":"A","mihin":"C","kesto":1},{"mista":"C","mihin":"D","kesto":5},{"mista":"C","mihin":"E","kesto":2},{"mista":"E","mihin":"D","kesto":3},{"mista":"E","mihin":"F","kesto":1},{"mista":"F","mihin":"G","kesto":1},{"mista":"G","mihin":"H","kesto":2},{"mista":"H","mihin":"I","kesto":2},{"mista":"I","mihin":"J","kesto":1},{"mista":"I","mihin":"G","kesto":1},{"mista":"G","mihin":"K","kesto":8},{"mista":"K","mihin":"L","kesto":1},{"mista":"L","mihin":"M","kesto":1},{"mista":"E","mihin":"M","kesto":10},{"mista":"M","mihin":"N","kesto":2},{"mista":"N","mihin":"O","kesto":2},{"mista":"O","mihin":"P","kesto":2},{"mista":"O","mihin":"Q","kesto":1},{"mista":"P","mihin":"Q","kesto":2},{"mista":"N","mihin":"Q","kesto":1},{"mista":"Q","mihin":"R","kesto":5},{"mista":"R","mihin":"N","kesto":3},{"mista":"D","mihin":"R","kesto":6}],"linjastot":{"keltainen":["E","F","G","K","L","M","N"],"punainen":["C","D","R","Q","N","O","P"],"vihre\xe4":["D","B","A","C","E","F","G","H","I","J"],"sininen":["D","E","M","N","O"]}}')},69:function(e,t,n){e.exports=n(80)},80:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(11),o=n.n(r),c=n(26),s=n(121),l=n(122),u=n(123),m=n(118),p=n(124),d=n(126),f=n(82),h=n(120),g=n(129),E=n(125),v=n(130),k=n(127),b=n(30);function O(e){var t=b.pysakit;return i.a.createElement(k.a,{autoComplete:!0,autoSelect:!0,autoHighlight:!0,options:t,value:e.selected,onChange:function(t,n){return e.onSelect(n)},renderInput:function(t){return i.a.createElement(E.a,Object.assign({},t,{label:e.label,variant:"outlined"}))}})}var j=function(e){return i.a.createElement(m.a,{variant:"h4",component:"span",align:"center"},e.children)},x=n(59),y=n.n(x),w=n(119),N=Object(w.a)((function(e){return{legsRoot:{minHeight:100,padding:"1em .7em .5em",overflow:"hidden",borderTop:"1px solid #ddd",display:"flex",whiteSpace:"nowrap",position:"relative"},lineLabel:{textTransform:"uppercase",color:e.palette.grey[600]},legStart:{position:"absolute",top:20,left:-8},legEnd:{position:"absolute",top:20,right:12},legGraph:{position:"relative",padding:"2px 40px 0 20px"}}})),S=Object(w.a)((function(e){return{legRoot:{margin:1},legLine:function(t){return{position:"relative",height:20,marginTop:e.spacing(1),marginBottom:e.spacing(1),backgroundColor:e.palette[t.color].main}},legIcon:function(t){return{position:"absolute",fontSize:"2em",left:6,top:-4,backgroundColor:"rgba(255, 255, 255, 0.9)",borderWidth:1,borderStyle:"solid",borderColor:e.palette[t.color].main,borderRadius:3}},lineLabel:{textTransform:"uppercase",color:e.palette.grey[600]}}}));function C(e){var t=function(e){switch(e){case"vihre\xe4":return"success";case"punainen":return"error";case"keltainen":return"warning";case"sininen":default:return"primary"}}(e.line),n=S({color:t});return i.a.createElement(h.a,{container:!0,direction:"column"},i.a.createElement(h.a,{item:!0,container:!0,className:n.lineLabel},"".concat(e.stops,": ").concat(e.duration)),i.a.createElement(h.a,{className:n.legRoot,item:!0},i.a.createElement(d.a,{color:"".concat(t,".main")},i.a.createElement("div",{className:n.legLine},i.a.createElement(y.a,{className:n.legIcon})))),i.a.createElement(h.a,{className:n.lineLabel,item:!0},e.line))}function F(e){var t=N(),n=e.legs,a=e.duration,r=Math.floor(12/n.length);return i.a.createElement(d.a,{color:"primary.main"},i.a.createElement(h.a,{container:!0,spacing:1,className:t.legsRoot},i.a.createElement(h.a,{item:!0,xs:10},i.a.createElement("div",{className:t.legGraph},i.a.createElement("div",{className:t.legStart},i.a.createElement(j,null,n[0].stops[0])),i.a.createElement(h.a,{container:!0},n.map((function(e){return i.a.createElement(h.a,{key:e.stops,item:!0,xs:r},i.a.createElement(C,e))}))),i.a.createElement("div",{className:t.legEnd},i.a.createElement(j,null,n[n.length-1].stops.slice(-1))))),i.a.createElement(h.a,{item:!0,xs:2},i.a.createElement("div",{className:t.lineLabel},"Kesto"),i.a.createElement(j,null,a))))}var L,R,D=n(45),I=(L=b.tiet,function(e){return L.filter((function(t){return-1!==[t.mista,t.mihin].indexOf(e)})).map((function(t){return{place:t.mista===e?t.mihin:t.mista,duration:t.kesto}}))}),A=function(e){return e.reduce((function(e,t){return Math.min(e,t.duration)}),1/0)},B=function(e,t,n){var a=A(n),i=A(t);return{start:t.filter((function(t){return t.duration+a<e})),end:n.filter((function(t){return t.duration+i<e}))}},G=(R=Object.values(b.linjastot),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join();return R.reduce((function(e,t){return e||-1!==t.join().indexOf(a)||-1!==t.reverse().join().indexOf(a)}),!1)}),M=function(e,t){return e.reduce((function(e,t){var n=t.places.slice(-1).pop(),a=t.places.slice(-2,-1).pop();return e.concat(I(n).filter((function(e){return e.place!==a})).filter((function(e){return G(n,e.place)})).map((function(e){return{places:t.places.concat(e.place),duration:t.duration+e.duration,durations:t.durations.concat(e.duration)}})))}),[]).filter((function(e){return e.duration<t})).filter((function(e){return t=e.places,!/.*(.).*\1{1,}/.test(t.join(""));var t})).reduce((function(e,t){var n=t.places.slice(-1).pop(),a=e.findIndex((function(e){return e.places.slice(-1).pop()===n}));return-1!==a?(e[a].duration>t.duration&&(e[a]=t),e):e.concat(t)}),[])},H=function(e,t){return e.reduce((function(e,n){var a=n.places.slice(-1).pop(),i=t.find((function(e){return e.places.slice(-1).pop()===a}));return i?e.concat({places:n.places.concat(i.places.slice(0,-1).reverse()),durations:n.durations.concat(i.durations.slice().reverse()),duration:i.duration+n.duration}):e}),[])},J=function(e){var t=Object.entries(e).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return{key:n,lineForward:a.join(),lineBackward:a.slice().reverse().join()}}));return function(e,n){return K(e).map((function(e,a){return{stops:e,duration:n[a],lines:t.reduce((function(t,n){var a=n.key,i=n.lineForward,r=n.lineBackward;return-1!==i.indexOf(e)||-1!==r.indexOf(e)?t.concat(a):t}),[])}}))}}(b.linjastot),Q=function(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))},K=function(e){return Array(e.length-1).fill("").map((function(t,n){return e.slice(n,n+2).join()}))};function W(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return n.reduce((function(e,t){return e.sort(t),e}),e.slice())}var P,T=function(e,t){return function(e,t){var n=[{places:[e],durations:[],duration:0}],a=[{places:[t],durations:[],duration:0}],i=[];i.push.apply(i,Object(D.a)(H(n,a)));do{n=M(n,A(i)),i.push.apply(i,Object(D.a)(H(n,a))),a=M(a,A(i)),i.push.apply(i,Object(D.a)(H(n,a)));var r=B(A(i),n,a);n=r.start,a=r.end}while(n.length>0&&a.length>0);return i}(e,t).map((function(e){var t,n=e.duration,a=e.places,i=e.durations;return{duration:n,legs:(t=J(a,i),t.slice(1).reduce((function(e,t){var n=e.slice(-1).pop(),a=Q(n.lines,t.lines);return a.length>0?(e[e.length-1]={stops:"".concat(n.stops).concat(t.stops.substring(1)),duration:n.duration+t.duration,lines:a},e):e.concat(t)}),t.slice(0,1)).map((function(e){return{stops:e.stops,duration:e.duration,line:e.lines[0]}})))}}))},z=function(e,t){return e.duration<t.duration?-1:1},V=function(e,t){return e.legs.length<t.legs.length?-1:1},$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return W(T(e,t),V,z).slice(0,n)},q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return W(T(e,t),z,V).slice(0,n)};!function(e){e[e.Fastest=0]="Fastest",e[e.Easiest=1]="Easiest"}(P||(P={}));function U(){var e=i.a.useState(null),t=Object(c.a)(e,2),n=t[0],a=t[1],r=i.a.useState(null),o=Object(c.a)(r,2),k=o[0],b=o[1],j=i.a.useState([]),x=Object(c.a)(j,2),y=x[0],w=x[1],N=i.a.useState(P.Fastest),S=Object(c.a)(N,2),C=S[0],L=S[1];return i.a.useEffect((function(){if(n&&k&&n!==k){var e=C===P.Easiest?q:$;w(e(n,k,3))}}),[n,k,C]),i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,null),i.a.createElement(l.a,{position:"static"},i.a.createElement(u.a,null,i.a.createElement(m.a,{variant:"h6"},"Reittiopas"))),i.a.createElement(p.a,{maxWidth:"lg"},i.a.createElement(d.a,{mx:-2,mt:1},i.a.createElement(f.a,{elevation:3},i.a.createElement(d.a,{padding:2},i.a.createElement(h.a,{container:!0,spacing:2},i.a.createElement(h.a,{item:!0,xs:12,sm:4},i.a.createElement(O,{label:"Alkupys\xe4kki",selected:n,onSelect:a})),i.a.createElement(h.a,{item:!0,xs:12,sm:4},i.a.createElement(O,{label:"Loppupys\xe4kki",selected:k,onSelect:b})),i.a.createElement(g.a,{xsDown:!0},i.a.createElement(h.a,{item:!0,sm:4},i.a.createElement(E.a,{select:!0,fullWidth:!0,variant:"outlined",value:C,onChange:function(e){L(+e.target.value)}},i.a.createElement(v.a,{value:P.Fastest},"Nopein"),i.a.createElement(v.a,{value:P.Easiest},"V\xe4hiten vaihtoja")))))),i.a.createElement(d.a,{padding:2},y.map((function(e){return i.a.createElement(F,{key:(t=e,t.legs.reduce((function(e,t){return"".concat(e,",").concat(t.stops)}),"")),duration:e.duration,legs:e.legs});var t})))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[69,1,2]]]);
//# sourceMappingURL=main.3e47ab5a.chunk.js.map