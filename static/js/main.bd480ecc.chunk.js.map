{"version":3,"sources":["components/BusStopSelect/BusStopSelect.tsx","components/RouteItem/LabelItem.tsx","components/RouteItem/styles.ts","components/RouteItem/RouteLeg.tsx","components/RouteItem/RouteItem.tsx","data/helpers.ts","data/routes.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["BusStopSelect","props","Autocomplete","autoComplete","autoSelect","autoHighlight","options","value","selected","onChange","event","onSelect","renderInput","params","TextField","autoFocus","autofocus","label","variant","LabelItem","Typography","component","align","children","useRouteItemStyles","makeStyles","theme","legsRoot","minHeight","padding","overflow","borderTop","display","whiteSpace","position","lineLabel","textTransform","color","palette","grey","overflowX","legStart","top","left","legEnd","right","legGraph","useRouteLegStyles","legRoot","margin","maxWidth","legLine","height","marginTop","spacing","marginBottom","backgroundColor","main","legIcon","fontSize","borderWidth","borderStyle","borderColor","borderRadius","textOverflow","RouteLeg","line","lineToColor","classes","Grid","container","direction","item","className","stops","duration","Box","RouteItem","legs","legWidth","Math","floor","length","xs","map","r","key","slice","getDurationMin","reduce","result","min","Infinity","hasDuplicates","arr","unique","Set","orderBy","sorters","sortBy","sort","roads","lines","OrderType","getDestinations","data","tiet","from","filter","mista","mihin","indexOf","place","kesto","routeExists","Object","values","linjastot","places","part","join","reverse","nextRoutes","routes","durationLimit","res","route","start","pop","previous","concat","durations","getMatches","fromStart","fromEnd","last","match","find","getLines","parsed","entries","lineForward","lineBackward","Array","fill","v","i","idx","getLinesGetter","getReasonableRoutes","to","startPoint","endPoint","push","findRoutes","keys1","keys2","k","substring","fastestCompare","a","b","easiestCompare","getFastest","quantity","getEasiest","App","React","useState","startPlace","setStartPlace","stopPlace","setStopPlace","setRoutes","Fastest","order","setOrder","busStops","setBusStops","useEffect","method","Easiest","pysakit","CssBaseline","AppBar","Toolbar","Container","mx","mt","Paper","elevation","sm","Hidden","xsDown","select","fullWidth","e","target","MenuItem","leg","Boolean","window","location","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.bd480ecc.chunk.js","sourcesContent":["import { TextField } from '@material-ui/core';\nimport { Autocomplete } from '@material-ui/lab';\nimport React from 'react';\n\nexport type BusStopSelectProps = {\n    label: string,\n    selected: string|null,\n    options: Array<string>,\n    autofocus?: boolean,\n    onSelect: (selected: string|null) => void,\n}\nexport default function BusStopSelect(props: BusStopSelectProps) {\n    const onChange = (event: object, value: string|null) => props.onSelect(value);\n\n    return (\n        <Autocomplete\n          autoComplete\n          autoSelect\n          autoHighlight\n          options={props.options}\n          value={props.selected}\n          onChange={onChange}\n          renderInput={(params) => (\n            <TextField\n              {...params}\n              autoFocus={props.autofocus}\n              label={props.label}\n              variant=\"outlined\"\n            />\n          )}\n        />\n    );\n}\n\n","import { Typography } from '@material-ui/core';\nimport React from 'react';\n\nconst LabelItem: React.FC = (props) => (\n    <Typography variant=\"h4\" component=\"span\" align=\"center\">\n        {props.children}\n    </Typography>\n);\n\nexport default LabelItem;","import { makeStyles, Theme } from '@material-ui/core/styles';\n\nexport type ColorPalette = 'primary' | 'error' | 'success' | 'warning';\n\nexport type StyleProps = {\n    color: ColorPalette,\n};\n\nexport const useRouteItemStyles = makeStyles((theme: Theme) => ({\n    legsRoot: {\n        minHeight: 100,\n        padding: '1em .7em .5em',\n        overflow: 'hidden',\n        borderTop: '1px solid #ddd',\n        display: 'flex',\n        whiteSpace: 'nowrap',\n        position: 'relative',\n    },\n    lineLabel: {\n        textTransform: 'uppercase',\n        color: theme.palette.grey[600],\n        overflowX: 'hidden',\n    },\n    legStart: {\n        position: 'absolute',\n        top: 20,\n        left: -8,\n    },\n    legEnd: {\n        position: 'absolute',\n        top: 20,\n        right: 12,\n    },\n    legGraph: {\n        position: 'relative',\n        padding: '2px 40px 0 20px',\n    },\n}));\n\nexport const useRouteLegStyles = makeStyles((theme: Theme) => ({\n    legRoot: {\n        margin: 1,\n        maxWidth: '100%',\n    },\n    legLine: (props: StyleProps) => ({\n        position: 'relative',\n        height: 20,\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        backgroundColor: theme.palette[props.color].main,\n    }),\n    legIcon: (props: StyleProps) => ({\n        position: 'absolute',\n        fontSize: '2em',\n        left: 6,\n        top: -4,\n        backgroundColor: 'rgba(255, 255, 255, 0.9)',\n        borderWidth: 1,\n        borderStyle: 'solid',\n        borderColor: theme.palette[props.color].main,\n        borderRadius: 3,\n    }),\n    lineLabel: {\n        textTransform: 'uppercase',\n        color: theme.palette.grey[600],\n        overflowX: 'hidden',\n        maxWidth: '100%',\n        textOverflow: 'ellipsis',\n    },\n}));","import { Box, Grid } from '@material-ui/core';\nimport BusIcon from '@material-ui/icons/DirectionsBus';\nimport React from 'react';\nimport { IRouteLeg } from '../../data';\nimport { ColorPalette, useRouteLegStyles } from './styles';\n\nconst lineToColor = (line: string): ColorPalette => {\n    switch (line) {\n        case 'vihreä':\n            return 'success';\n        case 'punainen':\n            return 'error';\n        case 'keltainen':\n            return 'warning';\n        case 'sininen':\n        default:\n            return 'primary';\n    }\n}\n\nexport default function RouteLeg(props: IRouteLeg) {\n    const color = lineToColor(props.line);\n    const classes = useRouteLegStyles({ color });\n\n    return (\n        <Grid container direction=\"column\">\n            <Grid item container className={classes.lineLabel}>\n                {`${props.stops}: ${props.duration}`}\n            </Grid>\n            <Grid className={classes.legRoot} item>\n                <Box color={`${color}.main`}>\n                    <div className={classes.legLine}>\n                        <BusIcon className={classes.legIcon} />\n                    </div>\n                </Box>\n            </Grid>\n            <Grid className={classes.lineLabel} item>{props.line}</Grid>\n        </Grid>\n    )\n}\n","import { Box, Grid } from '@material-ui/core';\nimport React from 'react';\nimport { IRouteLeg } from '../../data';\nimport LabelItem from './LabelItem';\nimport RouteLeg from './RouteLeg';\nimport { useRouteItemStyles } from './styles';\n\nexport type RouteItemProps = {\n    duration: number,\n    legs: Array<IRouteLeg>,\n};\n\nexport default function RouteItem(props: RouteItemProps) {\n    const classes = useRouteItemStyles();\n    const { legs, duration } = props;\n    const legWidth = Math.floor(12 / legs.length) as 1 | 6 | 4 | 3 | 10 | 2 | 5 | 7 | 8 | 9 | 11 | 12;\n\n    return (\n        <Box color=\"primary.main\">\n            <Grid container spacing={1} className={classes.legsRoot}>\n                <Grid item xs={10}>\n                    <div className={classes.legGraph}>\n                        <div className={classes.legStart}>\n                            <LabelItem>{legs[0].stops[0]}</LabelItem>\n                        </div>\n                        <Grid container>\n                            {legs.map((r: IRouteLeg) => (\n                                <Grid key={r.stops} item xs={legWidth}>\n                                    <RouteLeg {...r} />\n                                </Grid>\n                            ))}\n                        </Grid>\n                        <div className={classes.legEnd}>\n                            <LabelItem>{legs[legs.length - 1].stops.slice(-1)}</LabelItem>\n                        </div>\n                    </div>\n                </Grid>\n                <Grid item xs={2}>\n                    <div className={classes.lineLabel}>Kesto</div>\n                    <LabelItem>{duration}</LabelItem>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n}\n","import { IRoutePart } from \"./models\";\n\nexport const getDurationMin = (legs: Array<IRoutePart>): number => legs.reduce((result: number, r: IRoutePart) => Math.min(result, r.duration), Infinity);\n\nexport const getMatchingKeys = (keys1: Array<string>, keys2: Array<string>) => {\n    return keys1.filter(k => keys2.indexOf(k) !== -1);\n};\n\nexport const getRouteParts = (arr: Array<string>) => Array(arr.length - 1).fill('').map((v, i) => arr.slice(i, i + 2).join());\n\nexport const hasDuplicates = (arr: Array<string>) => {\n    const unique = [...new Set(arr)];\n    return arr.length !== unique.length;\n};\n\nexport function orderBy<T>(arr: Array<T>, ...sorters: Array<(a: T, b: T) => 0 | 1 | -1>) {\n    return sorters.reduce((result, sortBy) => {\n        result.sort(sortBy);\n        return result;\n    }, arr.slice());\n}\n","import data from './reittiopas.json';\nimport { ITie, IDestination, IRoutePart, ILinjastot, IRoutePartOptions, IRouteLeg, IRoute } from './models';\nimport { hasDuplicates, getMatchingKeys, getRouteParts, orderBy, getDurationMin } from './helpers';\n\nexport const getBusStops = () => data.pysakit;\n\nexport const getDestinationsGetter = (roads: Array<ITie>) => (from: string): Array<IDestination> => roads\n    .filter(r => [r.mista, r.mihin].indexOf(from) !== -1)\n    .map(r => ({ place: r.mista === from ? r.mihin : r.mista, duration: r.kesto }));\n\nconst getDestinations = getDestinationsGetter(data.tiet);\n\nexport const routeExistsGetter = (lines: Array<Array<string>>) => (...places: Array<string>) => {\n    const part = places.join()\n    return lines.reduce((result, line) => {\n        return result || line.join().indexOf(part) !== -1 || line.reverse().join().indexOf(part) !== -1\n    }, false);\n}\n\nconst routeExists = routeExistsGetter(Object.values(data.linjastot));\n\nconst nextRoutes = (routes: Array<IRoutePart>, durationLimit: number) => routes\n    .reduce((res: Array<IRoutePart>, route) => {\n        const start = route.places.slice(-1).pop();\n        const previous = route.places.slice(-2, -1).pop();\n        return res.concat(getDestinations(start!)\n            .filter(r => r.place !== previous)\n            .filter(r => routeExists(start!, r.place))\n            .map(r => ({\n                places: route.places.concat(r.place),\n                duration: route.duration + r.duration,\n                durations: route.durations.concat(r.duration),\n            })));\n    }, [])\n    .filter(r => r.duration < durationLimit)\n    .filter(r => !hasDuplicates(r.places));\n\nconst getMatches = (fromStart: Array<IRoutePart>, fromEnd: Array<IRoutePart>) => fromStart\n    .reduce((res: Array<IRoutePart>, route: IRoutePart) => {\n        const last = route.places.slice(-1).pop();\n        const match = fromEnd.find(r => r.places.slice(-1).pop() === last);\n        if (!match) {\n            return res;\n        }\n\n        // We want to see if there might be a faster route that contains more stops than already matched\n        // Hence the matches are not removed directly from search\n        // This may cause routes with duplicates i.e. C,E,M,L,M,N,O, which is combined from C,E,M,L AND O,N,M,L\n        const places = route.places.concat(match.places.slice(0, -1).reverse());\n        if (hasDuplicates(places)) {\n            return res;\n        }\n\n        return res.concat({\n            places,\n            durations: route.durations.concat(match.durations.slice().reverse()),\n            duration: match.duration + route.duration,\n        })\n    }, []);\n\nconst findRoutes = (startPoint: string, endPoint: string) => {\n    let fromStart: Array<IRoutePart> = [{ places: [startPoint], durations: [], duration: 0 }];\n    let fromEnd: Array<IRoutePart> = [{ places: [endPoint], durations: [], duration: 0 }];\n\n\n    const result: Array<IRoutePart> = []\n    result.push(...getMatches(fromStart, fromEnd));\n\n    do {\n        fromStart = nextRoutes(fromStart, getDurationMin(result) * 2);\n        result.push(...getMatches(fromStart, fromEnd));\n        fromEnd = nextRoutes(fromEnd, getDurationMin(result) * 2);\n        result.push(...getMatches(fromStart, fromEnd));\n    }  while (fromStart.length > 0 && fromEnd.length > 0);\n\n    return result;\n}\n\nconst getLinesGetter = (lines: ILinjastot) => {\n    const parsed = Object.entries(lines)\n        .map(([key, places]) => ({\n            key,\n            lineForward: places.join(),\n            lineBackward: places.slice().reverse().join(),\n        }));\n    return (route: Array<string>, durations: Array<number>) => getRouteParts(route)\n        .map((stops: string, idx): IRoutePartOptions => ({\n            stops,\n            duration: durations[idx],\n            lines: parsed.reduce((result: Array<string>, { key, lineForward, lineBackward }) => {\n                const stopsInLine = lineForward.indexOf(stops) !== -1 || lineBackward.indexOf(stops) !== -1;\n                return stopsInLine ? result.concat(key) : result;\n            }, []),\n        }));\n}\nconst getLines = getLinesGetter(data.linjastot);\n\nconst getLeastSwitches = (legs: Array<IRoutePartOptions>) => legs.slice(1)\n    .reduce((result, item) => {\n        const previous = result.slice(-1).pop();\n        const lines = getMatchingKeys(previous!.lines, item.lines);\n\n        if (lines.length > 0){\n            result[result.length - 1] = {\n                stops: `${previous!.stops}${item.stops.substring(1)}`,\n                duration: previous!.duration + item.duration,\n                lines,\n            };\n            return result;\n        }\n\n        return result.concat(item);\n    }, legs.slice(0, 1))\n    .map(({ stops, duration, lines}): IRouteLeg => ({ stops, duration, line: lines[0] }));\n\nconst getReasonableRoutes = (from: string, to: string): Array<IRoute> =>\n    findRoutes(from, to).map(({ duration, places, durations }) => ({\n        duration,\n        legs: getLeastSwitches(getLines(places, durations))\n    }));\n\nconst fastestCompare = (a: IRoute, b: IRoute) => a.duration < b.duration ? -1 : 1;\nconst easiestCompare = (a: IRoute, b: IRoute) => a.legs.length < b.legs.length ? -1 : 1;\nexport const getFastest = (from: string, to: string, quantity = 1) => orderBy(getReasonableRoutes(from, to), easiestCompare, fastestCompare).slice(0, quantity);\nexport const getEasiest = (from: string, to: string, quantity = 1) => orderBy(getReasonableRoutes(from, to), fastestCompare, easiestCompare).slice(0, quantity);\n","import { AppBar, Box, Container, CssBaseline, Grid, Hidden, MenuItem, Paper, TextField, Toolbar, Typography } from '@material-ui/core';\nimport React from 'react';\nimport BusStopSelect from './components/BusStopSelect';\nimport RouteItem from './components/RouteItem';\nimport { getFastest, getEasiest, IRoute, getBusStops } from './data';\n\nexport enum OrderType {\n    Fastest,\n    Easiest,\n}\n\nconst toKey = (route: IRoute) => route.legs.reduce((res: string, leg) => `${res},${leg.stops}`, '');\n\nexport default function App() {\n    const [startPlace, setStartPlace] = React.useState<string | null>(null);\n    const [stopPlace, setStopPlace] = React.useState<string | null>(null);\n    const [routes, setRoutes] = React.useState<Array<IRoute>>([]);\n    const [order, setOrder] = React.useState<OrderType>(OrderType.Fastest);\n    const [busStops, setBusStops] = React.useState<Array<string>>([]);\n\n    const onOrderChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setOrder(+e.target.value);\n    };\n\n    React.useEffect(() => {\n        if (startPlace && stopPlace && startPlace !== stopPlace) {\n            const method = order === OrderType.Easiest ? getEasiest : getFastest;\n            setRoutes(method(startPlace, stopPlace, 3));\n        }\n    }, [startPlace, stopPlace, order])\n\n    React.useEffect(() => {\n        setBusStops(getBusStops());\n    }, [])\n\n    return (\n        <>\n            <CssBaseline />\n            <AppBar position=\"static\">\n                <Toolbar>\n                    <Typography variant=\"h6\">\n                        Reittiopas\n                    </Typography>\n                </Toolbar>\n            </AppBar>\n            <Container maxWidth=\"lg\">\n                <Box mx={-2} mt={1}>\n                    <Paper elevation={3}>\n                        <Box padding={2}>\n                            <Grid container spacing={2}>\n                                <Grid item xs={12} sm={4}>\n                                    <BusStopSelect\n                                        label=\"Alkupysäkki\"\n                                        options={busStops}\n                                        selected={startPlace}\n                                        onSelect={setStartPlace}\n                                        autofocus\n                                    />\n                                </Grid>\n                                <Grid item xs={12} sm={4}>\n                                    <BusStopSelect\n                                        label=\"Loppupysäkki\"\n                                        options={busStops}\n                                        selected={stopPlace}\n                                        onSelect={setStopPlace}\n                                    />\n                                </Grid>\n                                <Hidden xsDown>\n                                    <Grid item sm={4}>\n                                        <TextField select fullWidth\n                                            variant=\"outlined\"\n                                            value={order}\n                                            onChange={onOrderChange}\n                                        >\n                                            <MenuItem value={OrderType.Fastest}>Nopein</MenuItem>\n                                            <MenuItem value={OrderType.Easiest}>Vähiten vaihtoja</MenuItem>\n                                        </TextField>\n                                    </Grid>\n                                </Hidden>\n                            </Grid>\n                        </Box>\n                        <Box padding={2}>\n                            {routes.map(r => (\n                                <RouteItem\n                                    key={toKey(r)}\n                                    duration={r.duration}\n                                    legs={r.legs}\n                                />\n                            ))}\n                        </Box>\n                    </Paper>\n                </Box>\n            </Container>\n        </>\n    );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}